# Simple-Calculator

Простой веб-калькулятор на Django, работающий через механизм шаблонов.

Поддерживаются базовые операции:

- **Сложение**
- **Вычитание**
- **Умножение**
- **Деление** (с проверкой деления на ноль)

Интерфейс реализован как одна страница с формой: два поля для чисел, выбор операции и вывод результата.

Калькулятор ведёт **историю вычислений** в сессии:

- сохраняются последние 10 успешных операций;
- история показывается под результатом в виде таблицы;
- при перезагрузке страницы история для текущей сессии сохраняется.

---

## Доступ администратора

Для проверки прав администратора в проекте уже создан суперпользователь:

- **Логин:** `admin`
- **Пароль:** `123`

Через этого пользователя можно:
- зайти в `/admin/` и управлять пользователями и операциями;
- зайти на `/history/` и видеть историю операций **всех** пользователей.

## Установка и запуск

Все команды выполняются из корня проекта.

### 1. Создать и активировать виртуальное окружение (Windows PowerShell)

```powershell
python -m venv venv
.\venv\Scripts\activate
```

После активации в начале строки терминала появится `(venv)`.

### 2. Установить зависимости

```powershell
pip install -r requirements.txt
```

### 3. Применить миграции

```powershell
python manage.py migrate
```

### 4. Запустить сервер разработки

```powershell
python manage.py runserver
```

По умолчанию сервер будет доступен по адресу:

```text
http://127.0.0.1:8000/
```

Открой адрес в браузере, чтобы увидеть страницу калькулятора.

---

## Структура проекта (основные файлы)

```text
calculator123/
├─ manage.py               # Точка входа для Django-команд
├─ requirements.txt        # Список зависимостей
├─ README.md               # Описание проекта
├─ config/
│  ├─ __init__.py
│  ├─ settings.py          # Настройки Django-проекта
│  ├─ urls.py              # Корневые маршруты
│  └─ wsgi.py              # WSGI-приложение
├─ calculator/
│  ├─ __init__.py
│  ├─ apps.py              # Конфигурация приложения
│  ├─ urls.py              # Маршруты калькулятора
│  └─ views.py             # Логика калькулятора (обработка формы)
└─ templates/
   └─ calculator/
      └─ calculator.html   # Шаблон с формой и стилями
```

---

## Как работает калькулятор

1. Пользователь открывает главную страницу `/`.
2. Вводит два числа и выбирает операцию из списка.
3. Нажимает кнопку **«Посчитать»**.
4. Django-представление `calculator_view` в `calculator/views.py`:
   - считывает значения полей из `POST`;
   - приводит их к типу `float` (при ошибке показывает сообщение);
   - выполняет выбранную операцию (`+`, `-`, `*`, `/`);
   - при делении на ноль показывает ошибку, а не падает;
   - сохраняет успешное вычисление в историю (в сессии, не более 10 последних записей);
   - передаёт результат, историю и возможную ошибку обратно в шаблон.
5. Шаблон `templates/calculator/calculator.html` отображает результат, историю вычислений либо сообщение об ошибке на той же странице.

---

